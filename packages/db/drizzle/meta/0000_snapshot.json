{
  "version": "6",
  "dialect": "sqlite",
  "id": "9ed7771b-50b8-4805-b140-bdc7a042e717",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "tables": {
    "bills": {
      "name": "bills",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "user_id": {
          "name": "user_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "month": {
          "name": "month",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "year": {
          "name": "year",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'UNPAID'"
        },
        "payment_token": {
          "name": "payment_token",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "snap_token": {
          "name": "snap_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "snap_token_expiry": {
          "name": "snap_token_expiry",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "snap_amount": {
          "name": "snap_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "paid_at": {
          "name": "paid_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "bills_payment_token_unique": {
          "name": "bills_payment_token_unique",
          "columns": [
            "payment_token"
          ],
          "isUnique": true
        },
        "idx_bills_user_id": {
          "name": "idx_bills_user_id",
          "columns": [
            "user_id"
          ],
          "isUnique": false
        },
        "idx_bills_status": {
          "name": "idx_bills_status",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "idx_bills_month_year": {
          "name": "idx_bills_month_year",
          "columns": [
            "month",
            "year"
          ],
          "isUnique": false
        },
        "idx_bills_payment_token": {
          "name": "idx_bills_payment_token",
          "columns": [
            "payment_token"
          ],
          "isUnique": false
        },
        "unique_user_month_year": {
          "name": "unique_user_month_year",
          "columns": [
            "user_id",
            "month",
            "year"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "bills_user_id_users_id_fk": {
          "name": "bills_user_id_users_id_fk",
          "tableFrom": "bills",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "payments": {
      "name": "payments",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "bill_id": {
          "name": "bill_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "method": {
          "name": "method",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "transaction_id": {
          "name": "transaction_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "payment_type": {
          "name": "payment_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "issuer": {
          "name": "issuer",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "gateway_status": {
          "name": "gateway_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'IDR'"
        },
        "raw_response": {
          "name": "raw_response",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "proof_url": {
          "name": "proof_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'PENDING'"
        },
        "paid_at": {
          "name": "paid_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "payments_transaction_id_unique": {
          "name": "payments_transaction_id_unique",
          "columns": [
            "transaction_id"
          ],
          "isUnique": true
        },
        "idx_payments_bill_id": {
          "name": "idx_payments_bill_id",
          "columns": [
            "bill_id"
          ],
          "isUnique": false
        },
        "idx_payments_transaction_id": {
          "name": "idx_payments_transaction_id",
          "columns": [
            "transaction_id"
          ],
          "isUnique": false
        },
        "idx_payments_status": {
          "name": "idx_payments_status",
          "columns": [
            "status"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "payments_bill_id_bills_id_fk": {
          "name": "payments_bill_id_bills_id_fk",
          "tableFrom": "payments",
          "tableTo": "bills",
          "columnsFrom": [
            "bill_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "settings": {
      "name": "settings",
      "columns": {
        "singleton": {
          "name": "singleton",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "monthly_fee": {
          "name": "monthly_fee",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "admin_phone_number": {
          "name": "admin_phone_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "''"
        },
        "app_title": {
          "name": "app_title",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'NetMeter'"
        },
        "app_subtitle": {
          "name": "app_subtitle",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'Patungan WiFi'"
        },
        "app_url": {
          "name": "app_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "''"
        },
        "listing_per_home": {
          "name": "listing_per_home",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 6
        },
        "bill_template": {
          "name": "bill_template",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'Assalamualaikum {name}, patungan bulan {month} / {year} sebesar Rp. {amount} sudah bisa dibayar. Untuk membayar secara otomatis, klik di sini: {link}'"
        },
        "payment_template": {
          "name": "payment_template",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'Assalamualaikum {name}, patungan sebesar Rp. {amount} sudah diterima. Terima kasih!'"
        },
        "reminder_template": {
          "name": "reminder_template",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'Assalamualaikum {name}, sekadar mengingatkan patungan WiFi bulan {month} / {year} sebesar Rp. {amount} belum lunas. Jika sudah bayar, abaikan pesan ini: {link}'"
        },
        "global_due_day": {
          "name": "global_due_day",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 10
        },
        "global_reminder_interval": {
          "name": "global_reminder_interval",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 3
        },
        "wa_enabled": {
          "name": "wa_enabled",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "auto_notify_new_bill": {
          "name": "auto_notify_new_bill",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "auto_notify_payment_success": {
          "name": "auto_notify_payment_success",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "auto_reminder_enabled": {
          "name": "auto_reminder_enabled",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "reminder_time": {
          "name": "reminder_time",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'09:00'"
        },
        "auto_bill_time": {
          "name": "auto_bill_time",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'09:00'"
        },
        "quiet_hours_start": {
          "name": "quiet_hours_start",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'21:00'"
        },
        "quiet_hours_end": {
          "name": "quiet_hours_end",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'08:00'"
        },
        "quiet_hours_weekend": {
          "name": "quiet_hours_weekend",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": true
        },
        "manual_payment_enabled": {
          "name": "manual_payment_enabled",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": true
        },
        "qris_payment_enabled": {
          "name": "qris_payment_enabled",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "manual_payment_details": {
          "name": "manual_payment_details",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "qris_static_image": {
          "name": "qris_static_image",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "midtrans_enabled": {
          "name": "midtrans_enabled",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "midtrans_server_key": {
          "name": "midtrans_server_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "midtrans_client_key": {
          "name": "midtrans_client_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "midtrans_environment": {
          "name": "midtrans_environment",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'sandbox'"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "users": {
      "name": "users",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "whatsapp": {
          "name": "whatsapp",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "pppoe_username": {
          "name": "pppoe_username",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'ACTIVE'"
        },
        "payment_preference": {
          "name": "payment_preference",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'MANUAL'"
        },
        "address": {
          "name": "address",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "device_model": {
          "name": "device_model",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "joined_at": {
          "name": "joined_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "first_connected_at": {
          "name": "first_connected_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "due_day": {
          "name": "due_day",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "reminder_interval": {
          "name": "reminder_interval",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "reminder_enabled": {
          "name": "reminder_enabled",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "users_pppoe_username_unique": {
          "name": "users_pppoe_username_unique",
          "columns": [
            "pppoe_username"
          ],
          "isUnique": true
        },
        "idx_users_status": {
          "name": "idx_users_status",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "idx_users_whatsapp": {
          "name": "idx_users_whatsapp",
          "columns": [
            "whatsapp"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "whatsapp_logs": {
      "name": "whatsapp_logs",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "recipient": {
          "name": "recipient",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "user_id": {
          "name": "user_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "bill_id": {
          "name": "bill_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'OTHER'"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'SENT'"
        },
        "wa_message_id": {
          "name": "wa_message_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "whatsapp_logs_wa_message_id_unique": {
          "name": "whatsapp_logs_wa_message_id_unique",
          "columns": [
            "wa_message_id"
          ],
          "isUnique": true
        },
        "idx_wa_logs_recipient": {
          "name": "idx_wa_logs_recipient",
          "columns": [
            "recipient"
          ],
          "isUnique": false
        },
        "idx_wa_logs_user_id": {
          "name": "idx_wa_logs_user_id",
          "columns": [
            "user_id"
          ],
          "isUnique": false
        },
        "idx_wa_logs_bill_id": {
          "name": "idx_wa_logs_bill_id",
          "columns": [
            "bill_id"
          ],
          "isUnique": false
        },
        "idx_wa_logs_created_at": {
          "name": "idx_wa_logs_created_at",
          "columns": [
            "created_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "whatsapp_logs_user_id_users_id_fk": {
          "name": "whatsapp_logs_user_id_users_id_fk",
          "tableFrom": "whatsapp_logs",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "whatsapp_logs_bill_id_bills_id_fk": {
          "name": "whatsapp_logs_bill_id_bills_id_fk",
          "tableFrom": "whatsapp_logs",
          "tableTo": "bills",
          "columnsFrom": [
            "bill_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}